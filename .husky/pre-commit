#!/usr/bin/env sh
. "$(dirname -- "$0")/_/husky.sh"

# Validate tokens before commit
npm run validate:tokens || exit 1

# Regenerate CSS variables if tokens changed
if git diff --cached --name-only | grep -q "tokens/system/"; then
  echo "ðŸ”„ Tokens changed, regenerating CSS variables..."
  npm run build:css-variables
  npm run build:token-types
  git add styles/tokens.css styles/token-types.d.ts
fi

# Lint for unresolved tokens in generated CSS (warn only for now)
# TODO: Remove --warn once token resolution is fixed
npm run lint:unresolved-tokens -- --warn || exit 1
